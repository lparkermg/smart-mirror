function roundVal(a){return Math.round(10*a)/10}jQuery.fn.updateWithText=function(a,b){var c=$("<div/>").html(a);$(this).html()!=c.html()&&$(this).fadeOut(b/2,function(){$(this).html(a),$(this).fadeIn(b/2,function(){})})},jQuery.fn.outerHTML=function(a){return a?this.before(a).remove():jQuery("<p>").append(this.eq(0).clone()).html()},jQuery(document).ready(function(a){var b,c,d=!1;moment.locale(lang),function e(){var b=moment(),c=b.format("LLLL").split(" ",4);c=c[0]+" "+c[1]+" "+c[2]+" "+c[3],a(".date").updateWithText(c,1e3),a(".time").updateWithText(b.format("HH")+":"+b.format("mm"),1e3),setTimeout(function(){e()},6e4)}(),function f(){var b={"01d":"wi-day-sunny","02d":"wi-day-cloudy","03d":"wi-cloudy","04d":"wi-cloudy-windy","09d":"wi-showers","10d":"wi-rain","11d":"wi-thunderstorm","13d":"wi-snow","50d":"wi-fog","01n":"wi-night-clear","02n":"wi-night-cloudy","03n":"wi-night-cloudy","04n":"wi-night-cloudy","09n":"wi-night-showers","10n":"wi-night-rain","11n":"wi-night-thunderstorm","13n":"wi-night-snow","50n":"wi-night-alt-cloudy-windy"};a.getJSON("http://api.openweathermap.org/data/2.5/weather",weatherParams,function(c){var d=roundVal(c.main.temp),e=(roundVal(c.main.temp_min),roundVal(c.main.temp_max),c.name+", "+c.sys.country);a(".location").updateWithText(e,1e3);var f=roundVal(c.wind.speed/1.609344);console.log(c);var g=b[c.weather[0].icon],h=a("<span/>").addClass("icon").addClass("xdimmed").addClass("wi").addClass(g);a(".temp").updateWithText(h.outerHTML()+d+"&deg",1e3);var i=new Date,j=new Date(1e3*c.sys.sunrise).toTimeString().substring(0,5),k=new Date(1e3*c.sys.sunset).toTimeString().substring(0,5),l='<span class="wi wi-strong-wind dimmed"></span> '+f+" mph",m='<span class="wi wi-sunrise dimmed"></span>'+j;1e3*c.sys.sunrise<i&&1e3*c.sys.sunset>i&&(m='<span class="wi wi-sunset dimmed"></span> '+k),a(".windsun").updateWithText(l+" "+m,1e3)}),setTimeout(function(){f()},6e4)}(),function g(){for(;c==b;){var e=new Date,f=e.getHours();f>=3&&12>f&&(compliments=morning),f>=12&&17>f&&(compliments=afternoon),(f>=17||3>f)&&(compliments=evening),c=Math.floor(Math.random()*compliments.length)}d===!0?a(".message").updateWithText(compliments[c],4e3):(a(".message").updateWithText(welcomeMessage[0],4e3),d=!0),lastComliment=c,setTimeout(function(){g(!0)},3e4)}()});